<%= form_with model: @message, local: true do |f| %>
  <div>
    <%= f.label :chat_id %>
    <%= f.collection_select :chat_id, @chats, :id, ->(c) { "Chat con #{c.receiver_id == current_user.id ? User.find(c.sender_id).first_name : User.find(c.receiver_id).first_name}" }, prompt: "Selecciona un chat" %>
  </div>

  <div>
    <%= f.label :body, "Contenido del mensaje" %>
    <%= f.text_area :body %>
  </div>

  <%= f.submit "Enviar", class: "btn btn-primary" %>
<% end %>
